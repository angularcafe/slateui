@if (menuOpen()) {
<div class="fixed inset-0 z-10 bg-muted/50" (click)="menuOpen.set(false)">
    <div class="h-full w-72 max-w-full bg-background px-10 shadow-xl" (click)="$event.stopPropagation()">
        <ng-container [ngTemplateOutlet]="content" />
    </div>
</div>
} @else {
<div class="hidden w-40 md:block xl:w-44">
    <ng-container [ngTemplateOutlet]="content" />
</div>
}

<ng-template #content>
    <div
        class="sticky top-24 flex h-[calc(100dvh-65px)] w-full flex-col gap-y-4 overflow-auto overscroll-contain md:h-max md:overflow-visible">
        @for (section of sections; track section.title) {
        <div class="mb-2">
            <h2 class="mb-4 text-sm font-semibold text-foreground">
                {{ section.title }}
            </h2>
            <ul>
                @for (link of section.links; track link.name) {
                <li class="text-muted-foreground hover:text-foreground">
                    <a class="relative flex h-10 items-center border-l border-border px-4 outline-none transition-colors focus-visible:ring-2 focus-visible:ring-ring"
                        [routerLink]="section?.link ? section.link + '/' + link.path : link.path"
                        routerLinkActive="text-foreground font-medium before:w-0.5 before:bg-foreground before:rounded-lg before:h-6 before:absolute before:left-0 before:-translate-x-1/2">
                        @if (link.icon) {
                        <ng-icon class="mr-2 text-base text-muted" [name]="link.icon" />
                        } {{ link.name }}
                    </a>
                </li>
                }
            </ul>
        </div>
        }
    </div>
</ng-template>